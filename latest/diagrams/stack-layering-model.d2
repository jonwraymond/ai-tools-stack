direction: down

style: { font-size: 14 }

layer_foundation: {
  label: "Foundation Layer"
  style: {
    border-radius: 8
    shadow: true
  }
  toolmodel: { shape: package }
}

layer_discovery: {
  label: "Discovery Layer"
  style: {
    border-radius: 8
    shadow: true
  }
  toolindex: { shape: cylinder }
  tooldocs: { shape: document }
  toolsearch: { shape: diamond }
  toolsemantic: { shape: diamond }
}

layer_protocol: {
  label: "Protocol Layer"
  style: {
    border-radius: 8
    shadow: true
  }
  tooladapter: { shape: package }
}

layer_composition: {
  label: "Composition Layer"
  style: {
    border-radius: 8
    shadow: true
  }
  toolset: { shape: cylinder }
  toolskill: { shape: page }
}

layer_execution: {
  label: "Execution Layer"
  style: {
    border-radius: 8
    shadow: true
  }
  toolrun: { shape: step }
  toolcode: { shape: page }
  toolruntime: { shape: cloud }
}

layer_crosscutting: {
  label: "Cross-Cutting Concerns"
  style: {
    border-radius: 8
    shadow: true
  }
  toolobserve: { shape: hexagon }
  toolcache: { shape: cylinder }
}

layer_surface: {
  label: "MCP Surface"
  style: {
    border-radius: 8
    shadow: true
  }
  metatools: "metatools-mcp" { shape: hexagon }
}

toolmodel -> toolindex
toolmodel -> tooladapter
toolmodel -> tooldocs
toolmodel -> toolrun

toolindex -> tooldocs
toolindex -> toolrun
toolindex -> toolsearch
toolindex -> toolsemantic

tooladapter -> toolset
toolset -> toolrun
toolset -> toolskill
toolrun -> toolskill

toolrun -> toolcode
toolcode -> toolruntime

toolobserve -> toolrun
toolcache -> toolrun

toolindex -> metatools
tooldocs -> metatools
toolrun -> metatools
toolcode -> metatools
toolset -> metatools
toolskill -> metatools
